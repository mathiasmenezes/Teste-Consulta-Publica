{"ast":null,"code":"import _objectWithoutProperties from\"C:/Users/Highcastle/Documents/Cidad\\xE3o+ Consulta P\\xFAblica/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";import _objectSpread from\"C:/Users/Highcastle/Documents/Cidad\\xE3o+ Consulta P\\xFAblica/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";const _excluded=[\"password\"];import jwtDecode from'jwt-decode';import databaseService from'./database';class SocialAuthService{constructor(){this.googleClientId=process.env.REACT_APP_GOOGLE_CLIENT_ID||'your-google-client-id';this.facebookAppId=process.env.REACT_APP_FACEBOOK_APP_ID||'your-facebook-app-id';}// Google OAuth Configuration\ngetGoogleConfig(){return{client_id:this.googleClientId,scope:'email profile',response_type:'token',redirect_uri:window.location.origin+'/auth/google/callback'};}// Facebook OAuth Configuration\ngetFacebookConfig(){return{app_id:this.facebookAppId,scope:'email,public_profile',response_type:'token',redirect_uri:window.location.origin+'/auth/facebook/callback'};}// Open OAuth popup window\nopenOAuthPopup(provider,config){const width=500;const height=600;const left=window.screenX+(window.outerWidth-width)/2;const top=window.screenY+(window.outerHeight-height)/2;const url=this.buildOAuthUrl(provider,config);const popup=window.open(url,\"\".concat(provider,\"OAuth\"),\"width=\".concat(width,\",height=\").concat(height,\",left=\").concat(left,\",top=\").concat(top,\",scrollbars=yes,resizable=yes\"));return new Promise((resolve,reject)=>{const checkClosed=setInterval(()=>{if(popup.closed){clearInterval(checkClosed);reject(new Error('OAuth popup was closed'));}},1000);window.addEventListener('message',event=>{if(event.origin!==window.location.origin)return;if(event.data.type==='OAUTH_SUCCESS'){clearInterval(checkClosed);popup.close();resolve(event.data.payload);}else if(event.data.type==='OAUTH_ERROR'){clearInterval(checkClosed);popup.close();reject(new Error(event.data.error));}});});}// Build OAuth URL for different providers\nbuildOAuthUrl(provider,config){switch(provider){case'google':const googleParams=new URLSearchParams({client_id:config.client_id,redirect_uri:config.redirect_uri,scope:config.scope,response_type:config.response_type,state:this.generateState()});return\"https://accounts.google.com/o/oauth2/v2/auth?\".concat(googleParams);case'facebook':const facebookParams=new URLSearchParams({client_id:config.app_id,redirect_uri:config.redirect_uri,scope:config.scope,response_type:config.response_type,state:this.generateState()});return\"https://www.facebook.com/v18.0/dialog/oauth?\".concat(facebookParams);default:throw new Error(\"Unsupported provider: \".concat(provider));}}// Generate random state for OAuth security\ngenerateState(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);}// Handle Google OAuth callback\nasync handleGoogleCallback(token){try{// Decode the ID token to get user information\nconst decoded=jwtDecode(token);const userData={email:decoded.email,name:decoded.name,picture:decoded.picture,socialId:decoded.sub,provider:'google'};return await this.processSocialUser(userData);}catch(error){console.error('Google OAuth callback error:',error);throw new Error('Failed to process Google login');}}// Handle Facebook OAuth callback\nasync handleFacebookCallback(token){try{var _userData$picture,_userData$picture$dat;// Get user information from Facebook Graph API\nconst response=await fetch(\"https://graph.facebook.com/me?fields=id,name,email,picture&access_token=\".concat(token));const userData=await response.json();if(userData.error){throw new Error(userData.error.message);}const processedUserData={email:userData.email,name:userData.name,picture:(_userData$picture=userData.picture)===null||_userData$picture===void 0?void 0:(_userData$picture$dat=_userData$picture.data)===null||_userData$picture$dat===void 0?void 0:_userData$picture$dat.url,socialId:userData.id,provider:'facebook'};return await this.processSocialUser(processedUserData);}catch(error){console.error('Facebook OAuth callback error:',error);throw new Error('Failed to process Facebook login');}}// Process social user data and create/update user\nasync processSocialUser(userData){try{// Check if user exists by social ID\nlet user=await databaseService.getUserBySocialId(userData.provider,userData.socialId);if(!user){// Check if user exists by email\nuser=await databaseService.getUserByEmail(userData.email);if(user){// User exists but doesn't have social login linked\n// Update user with social login information\nconst updatedUser=_objectSpread(_objectSpread({},user),{},{social_provider:userData.provider,social_id:userData.socialId,updated_at:new Date().toISOString()});await databaseService.db.put('users',updatedUser);user=updatedUser;}else{// Create new user with social login\nconst result=await databaseService.createUser(userData.email,null,// No password for social login\nuserData.name,'user',userData.provider,userData.socialId);user=await databaseService.getUserById(result.userId);}}// Return user data without password\nconst{password}=user,userWithoutPassword=_objectWithoutProperties(user,_excluded);return{success:true,user:userWithoutPassword,isNewUser:!user.social_provider// Check if this is the first social login\n};}catch(error){console.error('Process social user error:',error);throw error;}}// Demo OAuth flow (for development/testing)\nasync demoSocialLogin(provider){try{// Simulate OAuth flow delay\nawait new Promise(resolve=>setTimeout(resolve,2000));const demoUsers={google:{email:'demo.google@example.com',name:'Demo Google User',picture:'https://via.placeholder.com/150',socialId:'demo_google_123',provider:'google'},facebook:{email:'demo.facebook@example.com',name:'Demo Facebook User',picture:'https://via.placeholder.com/150',socialId:'demo_facebook_456',provider:'facebook'}};const userData=demoUsers[provider];if(!userData){throw new Error(\"Unsupported provider: \".concat(provider));}return await this.processSocialUser(userData);}catch(error){console.error('Demo social login error:',error);throw error;}}}export default new SocialAuthService();","map":{"version":3,"names":["jwtDecode","databaseService","SocialAuthService","constructor","googleClientId","process","env","REACT_APP_GOOGLE_CLIENT_ID","facebookAppId","REACT_APP_FACEBOOK_APP_ID","getGoogleConfig","client_id","scope","response_type","redirect_uri","window","location","origin","getFacebookConfig","app_id","openOAuthPopup","provider","config","width","height","left","screenX","outerWidth","top","screenY","outerHeight","url","buildOAuthUrl","popup","open","concat","Promise","resolve","reject","checkClosed","setInterval","closed","clearInterval","Error","addEventListener","event","data","type","close","payload","error","googleParams","URLSearchParams","state","generateState","facebookParams","Math","random","toString","substring","handleGoogleCallback","token","decoded","userData","email","name","picture","socialId","sub","processSocialUser","console","handleFacebookCallback","_userData$picture","_userData$picture$dat","response","fetch","json","message","processedUserData","id","user","getUserBySocialId","getUserByEmail","updatedUser","_objectSpread","social_provider","social_id","updated_at","Date","toISOString","db","put","result","createUser","getUserById","userId","password","userWithoutPassword","_objectWithoutProperties","_excluded","success","isNewUser","demoSocialLogin","setTimeout","demoUsers","google","facebook"],"sources":["C:/Users/Highcastle/Documents/Cidadão+ Consulta Pública/src/services/socialAuth.js"],"sourcesContent":["import jwtDecode from 'jwt-decode';\r\nimport databaseService from './database';\r\n\r\nclass SocialAuthService {\r\n  constructor() {\r\n    this.googleClientId = process.env.REACT_APP_GOOGLE_CLIENT_ID || 'your-google-client-id';\r\n    this.facebookAppId = process.env.REACT_APP_FACEBOOK_APP_ID || 'your-facebook-app-id';\r\n  }\r\n\r\n  // Google OAuth Configuration\r\n  getGoogleConfig() {\r\n    return {\r\n      client_id: this.googleClientId,\r\n      scope: 'email profile',\r\n      response_type: 'token',\r\n      redirect_uri: window.location.origin + '/auth/google/callback'\r\n    };\r\n  }\r\n\r\n  // Facebook OAuth Configuration\r\n  getFacebookConfig() {\r\n    return {\r\n      app_id: this.facebookAppId,\r\n      scope: 'email,public_profile',\r\n      response_type: 'token',\r\n      redirect_uri: window.location.origin + '/auth/facebook/callback'\r\n    };\r\n  }\r\n\r\n  // Open OAuth popup window\r\n  openOAuthPopup(provider, config) {\r\n    const width = 500;\r\n    const height = 600;\r\n    const left = window.screenX + (window.outerWidth - width) / 2;\r\n    const top = window.screenY + (window.outerHeight - height) / 2;\r\n\r\n    const url = this.buildOAuthUrl(provider, config);\r\n    \r\n    const popup = window.open(\r\n      url,\r\n      `${provider}OAuth`,\r\n      `width=${width},height=${height},left=${left},top=${top},scrollbars=yes,resizable=yes`\r\n    );\r\n\r\n    return new Promise((resolve, reject) => {\r\n      const checkClosed = setInterval(() => {\r\n        if (popup.closed) {\r\n          clearInterval(checkClosed);\r\n          reject(new Error('OAuth popup was closed'));\r\n        }\r\n      }, 1000);\r\n\r\n      window.addEventListener('message', (event) => {\r\n        if (event.origin !== window.location.origin) return;\r\n        \r\n        if (event.data.type === 'OAUTH_SUCCESS') {\r\n          clearInterval(checkClosed);\r\n          popup.close();\r\n          resolve(event.data.payload);\r\n        } else if (event.data.type === 'OAUTH_ERROR') {\r\n          clearInterval(checkClosed);\r\n          popup.close();\r\n          reject(new Error(event.data.error));\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  // Build OAuth URL for different providers\r\n  buildOAuthUrl(provider, config) {\r\n    switch (provider) {\r\n      case 'google':\r\n        const googleParams = new URLSearchParams({\r\n          client_id: config.client_id,\r\n          redirect_uri: config.redirect_uri,\r\n          scope: config.scope,\r\n          response_type: config.response_type,\r\n          state: this.generateState()\r\n        });\r\n        return `https://accounts.google.com/o/oauth2/v2/auth?${googleParams}`;\r\n      \r\n      case 'facebook':\r\n        const facebookParams = new URLSearchParams({\r\n          client_id: config.app_id,\r\n          redirect_uri: config.redirect_uri,\r\n          scope: config.scope,\r\n          response_type: config.response_type,\r\n          state: this.generateState()\r\n        });\r\n        return `https://www.facebook.com/v18.0/dialog/oauth?${facebookParams}`;\r\n      \r\n      default:\r\n        throw new Error(`Unsupported provider: ${provider}`);\r\n    }\r\n  }\r\n\r\n  // Generate random state for OAuth security\r\n  generateState() {\r\n    return Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15);\r\n  }\r\n\r\n  // Handle Google OAuth callback\r\n  async handleGoogleCallback(token) {\r\n    try {\r\n      // Decode the ID token to get user information\r\n      const decoded = jwtDecode(token);\r\n      \r\n      const userData = {\r\n        email: decoded.email,\r\n        name: decoded.name,\r\n        picture: decoded.picture,\r\n        socialId: decoded.sub,\r\n        provider: 'google'\r\n      };\r\n\r\n      return await this.processSocialUser(userData);\r\n    } catch (error) {\r\n      console.error('Google OAuth callback error:', error);\r\n      throw new Error('Failed to process Google login');\r\n    }\r\n  }\r\n\r\n  // Handle Facebook OAuth callback\r\n  async handleFacebookCallback(token) {\r\n    try {\r\n      // Get user information from Facebook Graph API\r\n      const response = await fetch(`https://graph.facebook.com/me?fields=id,name,email,picture&access_token=${token}`);\r\n      const userData = await response.json();\r\n\r\n      if (userData.error) {\r\n        throw new Error(userData.error.message);\r\n      }\r\n\r\n      const processedUserData = {\r\n        email: userData.email,\r\n        name: userData.name,\r\n        picture: userData.picture?.data?.url,\r\n        socialId: userData.id,\r\n        provider: 'facebook'\r\n      };\r\n\r\n      return await this.processSocialUser(processedUserData);\r\n    } catch (error) {\r\n      console.error('Facebook OAuth callback error:', error);\r\n      throw new Error('Failed to process Facebook login');\r\n    }\r\n  }\r\n\r\n  // Process social user data and create/update user\r\n  async processSocialUser(userData) {\r\n    try {\r\n      // Check if user exists by social ID\r\n      let user = await databaseService.getUserBySocialId(userData.provider, userData.socialId);\r\n      \r\n      if (!user) {\r\n        // Check if user exists by email\r\n        user = await databaseService.getUserByEmail(userData.email);\r\n        \r\n        if (user) {\r\n          // User exists but doesn't have social login linked\r\n          // Update user with social login information\r\n          const updatedUser = {\r\n            ...user,\r\n            social_provider: userData.provider,\r\n            social_id: userData.socialId,\r\n            updated_at: new Date().toISOString()\r\n          };\r\n          \r\n          await databaseService.db.put('users', updatedUser);\r\n          user = updatedUser;\r\n        } else {\r\n          // Create new user with social login\r\n          const result = await databaseService.createUser(\r\n            userData.email,\r\n            null, // No password for social login\r\n            userData.name,\r\n            'user',\r\n            userData.provider,\r\n            userData.socialId\r\n          );\r\n          \r\n          user = await databaseService.getUserById(result.userId);\r\n        }\r\n      }\r\n\r\n      // Return user data without password\r\n      const { password, ...userWithoutPassword } = user;\r\n      return {\r\n        success: true,\r\n        user: userWithoutPassword,\r\n        isNewUser: !user.social_provider // Check if this is the first social login\r\n      };\r\n    } catch (error) {\r\n      console.error('Process social user error:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  // Demo OAuth flow (for development/testing)\r\n  async demoSocialLogin(provider) {\r\n    try {\r\n      // Simulate OAuth flow delay\r\n      await new Promise(resolve => setTimeout(resolve, 2000));\r\n      \r\n      const demoUsers = {\r\n        google: {\r\n          email: 'demo.google@example.com',\r\n          name: 'Demo Google User',\r\n          picture: 'https://via.placeholder.com/150',\r\n          socialId: 'demo_google_123',\r\n          provider: 'google'\r\n        },\r\n        facebook: {\r\n          email: 'demo.facebook@example.com',\r\n          name: 'Demo Facebook User',\r\n          picture: 'https://via.placeholder.com/150',\r\n          socialId: 'demo_facebook_456',\r\n          provider: 'facebook'\r\n        }\r\n      };\r\n\r\n      const userData = demoUsers[provider];\r\n      if (!userData) {\r\n        throw new Error(`Unsupported provider: ${provider}`);\r\n      }\r\n\r\n      return await this.processSocialUser(userData);\r\n    } catch (error) {\r\n      console.error('Demo social login error:', error);\r\n      throw error;\r\n    }\r\n  }\r\n}\r\n\r\nexport default new SocialAuthService();\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}