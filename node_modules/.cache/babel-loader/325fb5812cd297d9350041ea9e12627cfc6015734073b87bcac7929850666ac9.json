{"ast":null,"code":"import _objectSpread from\"C:/Users/Highcastle/Documents/Cidad\\xE3o+ Consulta P\\xFAblica/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import{useNavigate}from'react-router-dom';import{useAuth}from'../../contexts/AuthContext';import socialAuthService from'../../services/socialAuth';import{Chrome,Facebook}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const SocialLogin=()=>{const[isLoading,setIsLoading]=useState({google:false,facebook:false});const{loginWithSocial}=useAuth();const navigate=useNavigate();const handleSocialLogin=async provider=>{try{setIsLoading(prev=>_objectSpread(_objectSpread({},prev),{},{[provider]:true}));// For demo purposes, use the demo login\n// In production, you would use the OAuth popup flow\nconst result=await socialAuthService.demoSocialLogin(provider);if(result.success){// Login the user through the auth context\nawait loginWithSocial(result.user);// Navigate based on user role\nif(result.user.role==='admin'){navigate('/admin');}else{navigate('/user');}}}catch(error){console.error(\"\".concat(provider,\" login error:\"),error);}finally{setIsLoading(prev=>_objectSpread(_objectSpread({},prev),{},{[provider]:false}));}};const handleOAuthLogin=async provider=>{try{setIsLoading(prev=>_objectSpread(_objectSpread({},prev),{},{[provider]:true}));let config;switch(provider){case'google':config=socialAuthService.getGoogleConfig();break;case'facebook':config=socialAuthService.getFacebookConfig();break;default:throw new Error(\"Unsupported provider: \".concat(provider));}const result=await socialAuthService.openOAuthPopup(provider,config);if(result.success){await loginWithSocial(result.user);if(result.user.role==='admin'){navigate('/admin');}else{navigate('/user');}}}catch(error){console.error(\"\".concat(provider,\" OAuth error:\"),error);}finally{setIsLoading(prev=>_objectSpread(_objectSpread({},prev),{},{[provider]:false}));}};return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 flex items-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-full border-t border-gray-300\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"relative flex justify-center text-sm\",children:/*#__PURE__*/_jsx(\"span\",{className:\"px-2 bg-white text-gray-500\",children:\"Or continue with\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleSocialLogin('google'),disabled:isLoading.google,className:\"w-full inline-flex justify-center items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed\",children:isLoading.google?/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner h-4 w-4\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Chrome,{className:\"h-4 w-4 mr-2 text-red-600\"}),\"Google\"]})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleSocialLogin('facebook'),disabled:isLoading.facebook,className:\"w-full inline-flex justify-center items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed\",children:isLoading.facebook?/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner h-4 w-4\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Facebook,{className:\"h-4 w-4 mr-2 text-blue-600\"}),\"Facebook\"]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-50 border border-blue-200 rounded-md p-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-blue-800\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-medium mb-1\",children:\"Demo Note:\"}),/*#__PURE__*/_jsx(\"p\",{children:\"This demo uses simulated social login. In production, this would open OAuth popup windows for real Google and Facebook authentication.\"})]})})]});};export default SocialLogin;","map":{"version":3,"names":["React","useState","useNavigate","useAuth","socialAuthService","Chrome","Facebook","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","SocialLogin","isLoading","setIsLoading","google","facebook","loginWithSocial","navigate","handleSocialLogin","provider","prev","_objectSpread","result","demoSocialLogin","success","user","role","error","console","concat","handleOAuthLogin","config","getGoogleConfig","getFacebookConfig","Error","openOAuthPopup","className","children","onClick","disabled"],"sources":["C:/Users/Highcastle/Documents/Cidadão+ Consulta Pública/src/components/auth/SocialLogin.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport socialAuthService from '../../services/socialAuth';\r\nimport { Chrome, Facebook } from 'lucide-react';\r\n\r\nconst SocialLogin = () => {\r\n  const [isLoading, setIsLoading] = useState({ google: false, facebook: false });\r\n  const { loginWithSocial } = useAuth();\r\n  const navigate = useNavigate();\r\n\r\n  const handleSocialLogin = async (provider) => {\r\n    try {\r\n      setIsLoading(prev => ({ ...prev, [provider]: true }));\r\n\r\n      // For demo purposes, use the demo login\r\n      // In production, you would use the OAuth popup flow\r\n      const result = await socialAuthService.demoSocialLogin(provider);\r\n      \r\n      if (result.success) {\r\n        // Login the user through the auth context\r\n        await loginWithSocial(result.user);\r\n        \r\n        // Navigate based on user role\r\n        if (result.user.role === 'admin') {\r\n          navigate('/admin');\r\n        } else {\r\n          navigate('/user');\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error(`${provider} login error:`, error);\r\n    } finally {\r\n      setIsLoading(prev => ({ ...prev, [provider]: false }));\r\n    }\r\n  };\r\n\r\n  const handleOAuthLogin = async (provider) => {\r\n    try {\r\n      setIsLoading(prev => ({ ...prev, [provider]: true }));\r\n\r\n      let config;\r\n      switch (provider) {\r\n        case 'google':\r\n          config = socialAuthService.getGoogleConfig();\r\n          break;\r\n        case 'facebook':\r\n          config = socialAuthService.getFacebookConfig();\r\n          break;\r\n        default:\r\n          throw new Error(`Unsupported provider: ${provider}`);\r\n      }\r\n\r\n      const result = await socialAuthService.openOAuthPopup(provider, config);\r\n      \r\n      if (result.success) {\r\n        await loginWithSocial(result.user);\r\n        \r\n        if (result.user.role === 'admin') {\r\n          navigate('/admin');\r\n        } else {\r\n          navigate('/user');\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error(`${provider} OAuth error:`, error);\r\n    } finally {\r\n      setIsLoading(prev => ({ ...prev, [provider]: false }));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-3\">\r\n      <div className=\"relative\">\r\n        <div className=\"absolute inset-0 flex items-center\">\r\n          <div className=\"w-full border-t border-gray-300\" />\r\n        </div>\r\n        <div className=\"relative flex justify-center text-sm\">\r\n          <span className=\"px-2 bg-white text-gray-500\">Or continue with</span>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-2 gap-3\">\r\n        {/* Google Login Button */}\r\n        <button\r\n          onClick={() => handleSocialLogin('google')}\r\n          disabled={isLoading.google}\r\n          className=\"w-full inline-flex justify-center items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n        >\r\n          {isLoading.google ? (\r\n            <div className=\"loading-spinner h-4 w-4\"></div>\r\n          ) : (\r\n            <>\r\n              <Chrome className=\"h-4 w-4 mr-2 text-red-600\" />\r\n              Google\r\n            </>\r\n          )}\r\n        </button>\r\n\r\n        {/* Facebook Login Button */}\r\n        <button\r\n          onClick={() => handleSocialLogin('facebook')}\r\n          disabled={isLoading.facebook}\r\n          className=\"w-full inline-flex justify-center items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n        >\r\n          {isLoading.facebook ? (\r\n            <div className=\"loading-spinner h-4 w-4\"></div>\r\n          ) : (\r\n            <>\r\n              <Facebook className=\"h-4 w-4 mr-2 text-blue-600\" />\r\n              Facebook\r\n            </>\r\n          )}\r\n        </button>\r\n      </div>\r\n\r\n      {/* Demo Note */}\r\n      <div className=\"bg-blue-50 border border-blue-200 rounded-md p-3\">\r\n        <div className=\"text-xs text-blue-800\">\r\n          <p className=\"font-medium mb-1\">Demo Note:</p>\r\n          <p>This demo uses simulated social login. In production, this would open OAuth popup windows for real Google and Facebook authentication.</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SocialLogin;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}